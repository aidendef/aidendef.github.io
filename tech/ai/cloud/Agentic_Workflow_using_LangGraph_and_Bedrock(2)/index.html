<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.27.1 by Michael Rose
  Copyright 2013-2025 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->

<html lang="en-US" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Agentic_Workflow_using_LangGraph_and_Bedrock(2) | Aiden의 든든한 Blog</title>
<meta name="description" content="라우터를 알아보자">


  <meta name="author" content="Your Name">
  
  <meta property="article:author" content="Your Name">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Aiden의 든든한 Blog">
<meta property="og:title" content="Agentic_Workflow_using_LangGraph_and_Bedrock(2)">
<meta property="og:url" content="https://aidendef.github.io//tech/ai/cloud/Agentic_Workflow_using_LangGraph_and_Bedrock(2)/">


  <meta property="og:description" content="라우터를 알아보자">



  <meta property="og:image" content="https://aidendef.github.io//assets/images/post_img/langgraph2.png">





  <meta property="article:published_time" content="2025-05-26T15:02:00+00:00">





  

  


<link rel="canonical" href="https://aidendef.github.io//tech/ai/cloud/Agentic_Workflow_using_LangGraph_and_Bedrock(2)/">












<!-- end _includes/seo.html -->



  <link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Aiden의 든든한 Blog Feed">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
  
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">
<link rel="preload" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
<noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@latest/css/all.min.css"></noscript>



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->
<link rel="icon" type="image/x-icon" href="/assets/images/favicon_io/favicon.ico">

<!-- Sidebar TOC styles -->
<link rel="stylesheet" href="/assets/css/sidebar-toc.css?v=6">

<!-- Global styles for white background -->
<link rel="stylesheet" href="/assets/css/global-style.css?v=3">

<!-- end custom head snippets -->

  </head>

  <body class="layout--single" dir="ltr">
    <nav class="skip-links">
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/favicon_io/favicon-32x32.png" alt="Aiden의 든든한 Blog"></a>
        
        <a class="site-title" href="/">
          Aiden의 든든한 Blog
          <span class="site-subtitle">V1.0</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a
                href="/categories/tech/"
                
                
              >Tech</a>
            </li><li class="masthead__menu-item">
              <a
                href="/categories/private/"
                
                
              >Private</a>
            </li><li class="masthead__menu-item">
              <a
                href="/recent"
                
                
              >Recent</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      





<div id="main" role="main">
  
  <div class="sidebar sticky">
  
  
    
      
      
      
      
    
    
      <nav class="nav__list">
  
  <input id="ac-toc" name="accordion-toc" type="checkbox" />
  <label for="ac-toc">Toggle menu</label>
  <ul class="nav__items">
    
      
      
        <li>
          
            <span class="nav__sub-title">Tech</span>
          

          
          <ul>
            
              <li><a href="/categories/ai/">AI</a></li>
            
              <li><a href="/categories/cloud/">Cloud</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <span class="nav__sub-title">Private</span>
          

          
          <ul>
            
              <li><a href="/categories/business/">Business</a></li>
            
              <li><a href="/categories/blog/">Blog</a></li>
            
          </ul>
          
        </li>
      
        <li>
          
            <a href="/recent"><span class="nav__sub-title">Recent</span></a>
          

          
        </li>
      
    
  </ul>
</nav>

    
  
  
  
    <nav class="toc sidebar-toc" id="sidebar-toc">
      <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> On this page</h4></header>
      <ul class="toc__menu"></ul>
    </nav>
  
  </div>



  <article class="page page-with-sidebar-toc" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Agentic_Workflow_using_LangGraph_and_Bedrock(2)">
    <meta itemprop="description" content="라우터를 알아보자">
    <meta itemprop="datePublished" content="2025-05-26T15:02:00+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">
            <a href="https://aidendef.github.io//tech/ai/cloud/Agentic_Workflow_using_LangGraph_and_Bedrock(2)/" itemprop="url">Agentic_Workflow_using_LangGraph_and_Bedrock(2)
</a>
          </h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          3 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        <h2 id="라우터란">라우터란?</h2>

<p>사용자의 인풋에 따라서, Gen AI를 컨텍스트에 맞는 답변을 수행해야 하는지를 판단하게 할 수 있습니다.
이러한 작업을 수행하는 것이 라우터입니다.
그래서 사용자의 컨텍스트에 맞게 해당되는 툴로 답변을 유도하거나, LLM이 스스로 답변하는 형태로 답변하도록 합니다.</p>

<p>이 실습예제도 사용자의 요청에 따라서 툴을 사용하거난, LLM을 통해서 직접 답변하게는 등의 수행이 제대로 되는지를 실습해 볼 예정입니다.</p>

<p>이러한 라우터 방식이 동작하게 하기 위해서 아래의 2가지 형태를 준비할 예정입니다.</p>
<ul>
  <li>우선 툴을 사용하는 노드를 구성합니다.</li>
  <li>그리고 조건부 엣지를 생성합니다. 이 조건부 엣지에서는 사용자 인풋에 따라서, 툴을 사용하게 할 것인지, LLM이 직접 답변하게 할 지 등에 대해서 라우터 역할을 수행하게 할 것입니다.</li>
</ul>

<h2 id="bedrock-setup">Bedrock setup</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import os
import boto3
from langchain_aws import ChatBedrockConverse
from langchain_aws import ChatBedrock

# ---- ⚠️ Update region for your AWS setup ⚠️ ----
aws_region = os.getenv("AWS_REGION")
bedrock_client = boto3.client("bedrock-runtime", region_name=aws_region)

llm = ChatBedrockConverse(
    model="anthropic.claude-3-haiku-20240307-v1:0",
    temperature=0,
    max_tokens=None,
    client=bedrock_client,
    # other params...
)

llm.invoke("what is the Amazon Nova?")

</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>AIMessage(content="The Amazon Nova is a line of tablet computers developed and sold by Amazon. Some key details about the Amazon Nova tablets:\n\n- They are part of Amazon's Fire tablet lineup, which also includes the standard Fire tablets and the Fire HD tablets.\n\n- The Amazon Nova tablets are designed to be more premium and higher-end models compared to the standard Fire tablets.\n\n- They typically feature larger screen sizes, more powerful processors, more RAM, and additional storage compared to the base Fire tablets.\n\n- The Amazon Nova tablets run Amazon's Fire OS, which is a customized version of the Android operating system.\n\n- They are primarily designed to integrate with Amazon's ecosystem of services like Amazon Prime, Kindle, Alexa, and Amazon's digital content stores.\n\n- Some recent models in the Amazon Nova line include the Fire HD 10 Plus and the Fire HD 10 Productivity Edition, which are positioned as more advanced and capable tablets.\n\nSo in summary, the Amazon Nova represents Amazon's higher-end tablet offerings that sit above their standard Fire tablet models in terms of features and performance.", additional_kwargs={}, response_metadata={'ResponseMetadata': {'RequestId': 'b2d2e840-07b8-4970-ab9e-d071784071dc', 'HTTPStatusCode': 200, 'HTTPHeaders': {'date': 'Thu, 27 Feb 2025 03:19:58 GMT', 'content-type': 'application/json', 'content-length': '1306', 'connection': 'keep-alive', 'x-amzn-requestid': 'b2d2e840-07b8-4970-ab9e-d071784071dc'}, 'RetryAttempts': 0}, 'stopReason': 'end_turn', 'metrics': {'latencyMs': 2564}}, id='run-1c7d4c35-2075-4e2d-b882-3f38ff843b09-0', usage_metadata={'input_tokens': 13, 'output_tokens': 228, 'total_tokens': 241})
</code></pre></div></div>

<h2 id="툴-함수-생성">툴 함수 생성</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def multiply(a: int, b: int) -&gt; int:
    """This tool is to multiply two input argrments such as a and b.

    Args:
        a: first int
        b: second int
    """
    return a * b

llm_with_tools = llm.bind_tools([multiply])
</code></pre></div></div>

<h2 id="그래프-생성">그래프 생성</h2>

<p>우리는 아주 쉽고 간단한 형태로 구현하는 것을 수행해 볼 것입니다.
LangGraph에서 제공하는 <code class="language-plaintext highlighter-rouge">ToolNode</code> 패키지를 이용할 것입니다.
툴노드를 사용하게 되면, 간단하게 생성된 툴들을 이 노드에서 처리하도록 할 수 있습니다.</p>

<p>그리고 Langgraph에서 제공하는 <code class="language-plaintext highlighter-rouge">tools_condition</code>을 조건부 엣지에서 사용할 예정입니다.
이 기능을 사용하게 되면, 사용자의 입력에 따라서 자동으로 어떤 툴들을 사용할지에 대해서 분기합니다.</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from IPython.display import Image, display
from langgraph.graph import StateGraph, START, END
from langgraph.graph import MessagesState
from langgraph.prebuilt import ToolNode
from langgraph.prebuilt import tools_condition

# Node
def tool_calling_llm(state: MessagesState):
    return {"messages": [llm_with_tools.invoke(state["messages"])]}

# Build graph
builder = StateGraph(MessagesState)
builder.add_node("tool_calling_llm", tool_calling_llm)
builder.add_node("tools", ToolNode([multiply]))
builder.add_edge(START, "tool_calling_llm")
builder.add_conditional_edges(
    "tool_calling_llm",
    # If the latest message (result) from assistant is a tool call -&gt; tools_condition routes to tools
    # If the latest message (result) from assistant is a not a tool call -&gt; tools_condition routes to END
    tools_condition,
)
builder.add_edge("tools", END)
graph = builder.compile()

# View
display(Image(graph.get_graph().draw_mermaid_png()))
</code></pre></div></div>
<p><img src="/assets/images/post_img/langgraph2.png" alt="langgraph2" /></p>

<h2 id="일상적인-대화로-질의">일상적인 대화로 질의</h2>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from langchain_core.messages import HumanMessage
messages = [HumanMessage(content="안녕 잘 지내?")]
messages = graph.invoke({"messages": messages})
for m in messages['messages']:
    m.pretty_print()
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>================================ Human Message =================================

안녕 잘 지내?
================================== Ai Message ==================================

네, 저도 잘 지내고 있습니다. 오늘 날씨가 좋아서 기분이 좋네요. 어떤 계획이 있으신가요? 함께 즐거운 시간을 보내면 좋겠습니다.
</code></pre></div></div>

<h2 id="곱셈을-문의하는-질의">곱셈을 문의하는 질의</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>messages = [HumanMessage(content="134 곱하기 1435를 계산하면 얼마야?")]
messages = graph.invoke({"messages": messages})
for m in messages['messages']:
    m.pretty_print()
</code></pre></div></div>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>================================ Human Message =================================

134 곱하기 1435를 계산하면 얼마야?
================================== Ai Message ==================================

[{'type': 'tool_use', 'name': 'multiply', 'input': {'a': 134, 'b': 1435}, 'id': 'tooluse_FYpRmFUlTz6BQRNDuX6Fpg'}]
Tool Calls:
  multiply (tooluse_FYpRmFUlTz6BQRNDuX6Fpg)
 Call ID: tooluse_FYpRmFUlTz6BQRNDuX6Fpg
  Args:
    a: 134
    b: 1435
================================= Tool Message =================================
Name: multiply

192290
</code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        
  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      <a href="/tags/#agentic" class="page__taxonomy-item p-category" rel="tag">Agentic</a><span class="sep">, </span>
    
      <a href="/tags/#aws" class="page__taxonomy-item p-category" rel="tag">AWS</a><span class="sep">, </span>
    
      <a href="/tags/#bedrock" class="page__taxonomy-item p-category" rel="tag">Bedrock</a><span class="sep">, </span>
    
      <a href="/tags/#langgraph" class="page__taxonomy-item p-category" rel="tag">LangGraph</a>
    
    </span>
  </p>




  


  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      <a href="/categories/#ai" class="page__taxonomy-item p-category" rel="tag">ai</a><span class="sep">, </span>
    
      <a href="/categories/#cloud" class="page__taxonomy-item p-category" rel="tag">cloud</a><span class="sep">, </span>
    
      <a href="/categories/#tech" class="page__taxonomy-item p-category" rel="tag">tech</a>
    
    </span>
  </p>


        

  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time class="dt-published" datetime="2025-05-26T15:02:00+00:00">May 26, 2025</time></p>

      </footer>

      <section class="page__share">
  <h4 class="page__share-title">Share on</h4>

  <a href="https://x.com/intent/tweet?text=Agentic_Workflow_using_LangGraph_and_Bedrock%282%29%20https%3A%2F%2Faidendef.github.io%2F%2Ftech%2Fai%2Fcloud%2FAgentic_Workflow_using_LangGraph_and_Bedrock%282%29%2F" class="btn btn--x" aria-label="Share on X" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on X">
    <i class="fab fa-fw fa-x-twitter" aria-hidden="true"></i><span> X</span>
  </a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Faidendef.github.io%2F%2Ftech%2Fai%2Fcloud%2FAgentic_Workflow_using_LangGraph_and_Bedrock%282%29%2F" class="btn btn--facebook" aria-label="Share on Facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook">
    <i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span>
  </a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https://aidendef.github.io//tech/ai/cloud/Agentic_Workflow_using_LangGraph_and_Bedrock(2)/" class="btn btn--linkedin" aria-label="Share on LinkedIn" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn">
    <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span>
  </a>

  <a href="https://bsky.app/intent/compose?text=Agentic_Workflow_using_LangGraph_and_Bedrock%282%29%20https%3A%2F%2Faidendef.github.io%2F%2Ftech%2Fai%2Fcloud%2FAgentic_Workflow_using_LangGraph_and_Bedrock%282%29%2F" class="btn btn--bluesky" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Bluesky">
    <i class="fab fa-fw fa-bluesky" aria-hidden="true"></i><span> Bluesky</span>
  </a>
</section>


      
  <nav class="pagination">
    
      <a href="/tech/ai/cloud/Agentic_Workflow_using_LangGraph_and_Bedrock(1)/" class="pagination--pager" title="Agentic_Workflow_using_LangGraph_and_Bedrock(1)">Previous</a>
    
    
      <a href="/tech/ai/cloud/Agentic_Workflow_using_LangGraph_and_Bedrock(3)/" class="pagination--pager" title="Agentic_Workflow_using_LangGraph_and_Bedrock(3)">Next</a>
    
  </nav>


    </div>

    
    
    
  </article>
</div>


<script src="/assets/js/sidebar-toc.js"></script>


      
    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <footer class="site-footer">
  <div style="max-width: 1080px; margin: 0 auto; display: flex; justify-content: space-around; flex-wrap: wrap; gap: 40px; font-size: 0.95rem;">

    <!-- TECH 섹션 -->
    <div>
      <h4 style="margin-bottom: 10px; border-bottom: 1px solid #e0d6b9;">TECH</h4>
      <ul style="list-style: none; padding: 0;">
        <li><a href="/categories/ai/" style="color: #222; text-decoration: none;">AI</a></li>
        <li><a href="/categories/cloud/" style="color: #222; text-decoration: none;">Cloud</a></li>
      </ul>
    </div>

    <!-- PRIVATE 섹션 -->
    <div>
      <h4 style="margin-bottom: 10px; border-bottom: 1px solid #e0d6b9;">PRIVATE</h4>
      <ul style="list-style: none; padding: 0;">
        <li><a href="/categories/business/" style="color: #222; text-decoration: none;">Business</a></li>
        <li><a href="/categories/blog/" style="color: #222; text-decoration: none;">Blog</a></li>
      </ul>
    </div>

    <!-- RECENT 섹션 -->
    <div>
      <h4 style="margin-bottom: 10px; border-bottom: 1px solid #e0d6b9;">RECENT</h4>
      <ul style="list-style: none; padding: 0;">
        <li><a href="/recent/" style="color: #222; text-decoration: none;">최근 글 보기</a></li>
      </ul>
    </div>

    <!-- LINK TREE 섹션 -->
    <div>
      <h4 style="margin-bottom: 10px; border-bottom: 1px solid #e0d6b9;">LINK TREE</h4>
      <ul style="list-style: none; padding: 0;">
        <li><a href="mailto:aiden02095@gmail.com" style="color: #222; text-decoration: none;">aiden02095@gmail.com</a></li>
        <li><a href="https://www.linkedin.com/in/yonggyu-kim-32650521a/" style="color: #222; text-decoration: none;">LinkedIn</a></li>
        <li><a href="https://aidendef.github.io/" style="color: #222; text-decoration: none;">Blog</a></li>
        <li><a href="https://scholar.google.com/citations?hl=ko&view_op=list_works&gmla=AGd7smG0eu-Rlnn9AJ4_k5IHf5hgJ3-Ck637ZE18uzIghA-SpGhplBRaIpXg5MhAlW3gEtYmIjxE7PQbToDG_a_-Fb1yAhKHqAjEMYPwnc9DD2ObKD1tvrEEUEAe_jY&user=9Go7rwsAAAAJ" style="color: #222; text-decoration: none;">Google scholar Profile</a></li>
        <li><a href="https://ieeexplore.ieee.org/author/395117798154712" style="color: #222; text-decoration: none;">IEEE Profile</a></li>
        <li><a href="https://orcid.org/my-orcid?orcid=0000-0001-7038-8715" style="color: #222; text-decoration: none;">ORCID Profile</a></li>
      </ul>
    </div>

  </div>

  <div style="text-align: center; margin-top: 40px; color: #666;">
    © 2025 Aiden의 든든한 Blog. All rights reserved.
  </div>
</footer>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>









  </body>
</html>
